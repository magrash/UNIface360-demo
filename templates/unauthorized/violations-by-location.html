<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Violations by Location - Unauthorized Area Dashboard</title>
    <link rel="icon" href="{{ url_for('static', filename='logo6.png') }}" type="image/png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles_2.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body class="dashboard">
    {% include 'unauthorized/_navbar.html' %}
    <div class="container-fluid">
        <div class="row">
            {% include 'unauthorized/_sidebar.html' %}
            <main class="col-12 col-lg-10 p-3 p-lg-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="m-0">Violations by Location (Heat Map)</h3>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline" id="btnExportCsv"><i class="fa-solid fa-download"></i> Export CSV</button>
                        <button class="btn btn-gradient" id="btnExportPdf"><i class="fa-solid fa-file-pdf"></i> Export PDF</button>
                    </div>
                </div>

                <!-- KPIs -->
                <div class="row g-3 mb-3">
                    <div class="col-6 col-lg-3">
                        <div class="glass-card p-3 kpi h-100">
                            <div class="icon danger">üìç</div>
                            <div>
                                <div class="value">24</div>
                                <div class="label">Monitored Locations</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3">
                        <div class="glass-card p-3 kpi h-100">
                            <div class="icon warning">üî•</div>
                            <div>
                                <div class="value">5</div>
                                <div class="label">Hot Zones</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3">
                        <div class="glass-card p-3 kpi h-100">
                            <div class="icon info">üìπ</div>
                            <div>
                                <div class="value">18</div>
                                <div class="label">Cameras Linked</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3">
                        <div class="glass-card p-3 kpi h-100">
                            <div class="icon success">‚úÖ</div>
                            <div>
                                <div class="value">12</div>
                                <div class="label">Safe Zones</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Heat Map -->
                <div class="glass-card p-4 mb-3">
                    <div class="section-title mb-3">Location Heat Map</div>
                    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:15px;">
                        <div style="background:#10b981;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 1</div>
                            <div style="font-size:1.5rem;margin-top:5px;">2</div>
                            <div style="font-size:0.8rem;opacity:0.9;">Low Risk</div>
                        </div>
                        <div style="background:#f59e0b;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 2</div>
                            <div style="font-size:1.5rem;margin-top:5px;">8</div>
                            <div style="font-size:0.8rem;opacity:0.9;">High Risk</div>
                        </div>
                        <div style="background:#ef4444;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 3</div>
                            <div style="font-size:1.5rem;margin-top:5px;">15</div>
                            <div style="font-size:0.8rem;opacity:0.9;">Critical</div>
                        </div>
                        <div style="background:#3b82f6;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 4</div>
                            <div style="font-size:1.5rem;margin-top:5px;">5</div>
                            <div style="font-size:0.8rem;opacity:0.9;">Medium</div>
                        </div>
                        <div style="background:#10b981;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 5</div>
                            <div style="font-size:1.5rem;margin-top:5px;">1</div>
                            <div style="font-size:0.8rem;opacity:0.9;">Low Risk</div>
                        </div>
                        <div style="background:#f59e0b;padding:25px;border-radius:10px;text-align:center;color:white;font-weight:bold;cursor:pointer;" data-bs-toggle="modal" data-bs-target="#locationModal">
                            <div>Zone 6</div>
                            <div style="font-size:1.5rem;margin-top:5px;">7</div>
                            <div style="font-size:0.8rem;opacity:0.9;">High Risk</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-center gap-3 mt-3">
                        <small><span style="display:inline-block;width:15px;height:15px;background:#10b981;border-radius:3px;margin-right:4px;"></span> Low (1-3)</small>
                        <small><span style="display:inline-block;width:15px;height:15px;background:#3b82f6;border-radius:3px;margin-right:4px;"></span> Medium (4-7)</small>
                        <small><span style="display:inline-block;width:15px;height:15px;background:#f59e0b;border-radius:3px;margin-right:4px;"></span> High (8-11)</small>
                        <small><span style="display:inline-block;width:15px;height:15px;background:#ef4444;border-radius:3px;margin-right:4px;"></span> Critical (12+)</small>
                    </div>
                </div>

                <!-- Location Details Table -->
                <div class="glass-card p-3">
                    <div class="section-title mb-3">Location Details</div>
                    <div class="table-responsive">
                        <table class="table table-darkish align-middle mb-0">
                            <thead>
                                <tr>
                                    <th>Location</th>
                                    <th>Violations</th>
                                    <th>Risk Level</th>
                                    <th>Linked Cameras</th>
                                    <th>Last Incident</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="fw-semibold">Warehouse Zone A</div>
                                        <div class="text-muted small">Building A, Floor 2</div>
                                    </td>
                                    <td><span class="badge bg-danger">15</span></td>
                                    <td><span class="badge bg-danger">Critical</span></td>
                                    <td>
                                        <div class="d-flex gap-1">
                                            <span class="chip small">CAM-001</span>
                                            <span class="chip small">CAM-002</span>
                                        </div>
                                    </td>
                                    <td>2025-01-15 10:23 AM</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline" data-bs-toggle="modal" data-bs-target="#locationModal"><i class="fa-regular fa-eye"></i></button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="fw-semibold">Chemical Storage</div>
                                        <div class="text-muted small">Building B, Basement</div>
                                    </td>
                                    <td><span class="badge bg-warning">12</span></td>
                                    <td><span class="badge bg-warning">High</span></td>
                                    <td>
                                        <div class="d-flex gap-1">
                                            <span class="chip small">CAM-003</span>
                                        </div>
                                    </td>
                                    <td>2025-01-15 09:45 AM</td>
                                    <td>
                                        <button class="btn btn-sm btn-outline" data-bs-toggle="modal" data-bs-target="#locationModal"><i class="fa-regular fa-eye"></i></button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Location Detail Modal -->
    <div class="modal fade" id="locationModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content" style="background:var(--card);border:1px solid var(--card-border);">
                <div class="modal-header" style="border-bottom:1px solid var(--card-border);">
                    <h5 class="modal-title">Location Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="glass-card p-3">
                                <h6>Basic Information</h6>
                                <div class="mb-2"><strong>Name:</strong> Warehouse Zone A</div>
                                <div class="mb-2"><strong>Location:</strong> Building A, Floor 2</div>
                                <div class="mb-2"><strong>Risk Level:</strong> <span class="badge bg-danger">Critical</span></div>
                                <div class="mb-2"><strong>Total Violations:</strong> 15</div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="glass-card p-3">
                                <h6>Linked Cameras</h6>
                                <div class="d-flex flex-column gap-2">
                                    <div><i class="fa-solid fa-video"></i> CAM-001 - Main Entrance</div>
                                    <div><i class="fa-solid fa-video"></i> CAM-002 - Storage Area</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="glass-card p-3">
                                <h6>Recent Incidents</h6>
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Type</th>
                                                <th>Person</th>
                                                <th>Severity</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2025-01-15</td>
                                                <td>Unauthorized Entry</td>
                                                <td>Ahmed Mohamed</td>
                                                <td><span class="badge bg-danger">Critical</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="border-top:1px solid var(--card-border);">
                    <button type="button" class="btn btn-outline" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

